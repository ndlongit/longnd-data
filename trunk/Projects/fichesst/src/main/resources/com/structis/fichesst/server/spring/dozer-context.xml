<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="
       	   http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans.xsd">
	<!-- Bean Mapper for  for Initialized checking Field-->
	<bean id="modelBeanInitializedMapperDozer" class="com.structis.fichesst.server.mapper.ModelBeanInitializedMapperDozerImpl" >
		<property name="dozerCustomFieldMapper" ref="dozerCustomFieldMapper"></property>
		<property name="modelBeanMapper" ref="modelBeanMapper"></property>
	</bean>
	<!-- Bean Mapper -->
	<bean id="modelBeanMapper"
		class="com.structis.fichesst.server.mapper.ModelBeanMapperDozerImpl">
		<property name="mapper" ref="dozerMapper"></property>
		<property name="modelBeanMap" ref="modelBeanMap"></property>
	</bean>

	<bean id="modelBeanMap" class="com.structis.fichesst.server.mapper.ModelBeanMapImpl">
		<property name="mapper" ref="dozerMapper"></property>
	</bean>

	<!-- Date Helper -->
	<bean id="dateMapper" class="com.structis.fichesst.server.mapper.DateMapper" />
	
	<!-- dozer Customize for Initialized checking Field -->
	<bean id="dozerCustomFieldMapper" class="com.structis.fichesst.server.mapper.HibernateInitializedFieldMapper" />
	
	<!-- Dozer Bean Mapper -->
	<bean id="dozerMapper" class="org.dozer.DozerBeanMapper">
		<property name="mappingFiles">
			<list>
				<value>com/structis/fichesst/server/dozer/modelbean-mapper.xml</value>
			</list>
		</property>
		<property name="customConvertersWithId">
			<map>
				<entry key="dateValidationDataConverter" value-ref="dateValidationDataConverter" />
				<entry key="dateActionDataConverter" value-ref="dateActionDataConverter" />
				<entry key="dateIndexDataConverter" value-ref="dateIndexDataConverter" />
			</map>
		</property>
		<property name="eventListeners">
			<list>
				<ref bean="mappingActivableListener" />
			</list>
		</property>
	</bean>

	<!-- Listener -->
	<bean id="mappingActivableListener"
		class="com.structis.fichesst.server.mapper.MappingActivableListener">
		<property name="dateMapper" ref="dateMapper"></property>
	</bean>

	<!-- Converter -->
	<bean id="dateValidationDataConverter" class="com.structis.fichesst.server.mapper.DateStringConverter">
		<property name="formatDate" value="MM/yyyy"></property>
		<property name="dateMapper" ref="dateMapper"></property>
		<property name="useActualDate" value="false"></property>
	</bean>

	<bean id="dateActionDataConverter" class="com.structis.fichesst.server.mapper.DateStringConverter">
		<property name="formatDate" value="dd/MM/yyyy HH:mm"></property>
		<property name="dateMapper" ref="dateMapper"></property>
	</bean>

	<bean id="dateIndexDataConverter" class="com.structis.fichesst.server.mapper.DateStringConverter">
		<property name="formatDate" value="dd/MM/yyyy HH:mm:ss SSS"></property>
		<property name="dateMapper" ref="dateMapper"></property>
	</bean>
</beans>