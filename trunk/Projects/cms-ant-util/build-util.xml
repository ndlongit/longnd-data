<?xml version="1.0" encoding="UTF-8"?>
<!-- ======================================================================
     Sep 02, 2009 11:11:20 AM

     Description

     Long.D.Nguyen
     ====================================================================== -->
<project name="ant-util">

	<property file="build-util.properties" />

	<property name="dir1" value="D:\Working\Eurobase-CMS\Code\EurobaseCMS" />
	<property name="dir2" value="D:\Other\Backup\CMS" />
	<property name="dir3" value="D:\Delete" />

	<property name="baseDir" value="${dir1}" />
	<property name="fromDir" value="${dir2}" />
	<property name="toDir" value="D:\Other\conf" />
	<property name="deleteDir" value="D:\\Delete" />

	<fileset id="copied-files" dir="${fromDir}" casesensitive="false" erroronmissingdir="true" defaultexcludes="true">
		<include name="**/pom.xml" />		
		<include name="**/*.*" />
		<exclude name="**/*.class" />
		<exclude name="**/target/**" />
		<!-- <globmapper from="*" to="*.bak" /> -->
	</fileset>

	<fileset id="moved-files" dir="${fromDir}" casesensitive="false" erroronmissingdir="true" defaultexcludes="true">
		<include name="**/ListPublicationSite*.*" />
		<exclude name="**/*.class" />
		<exclude name="**/target/**" />
	</fileset>

	<fileset id="deleted-files" dir="${deleteDir}" casesensitive="false" erroronmissingdir="true" defaultexcludes="true">
		<include name="*/target/**" />
	</fileset>

	<target name="copy-files">
		<copy todir="${toDir}" overwrite="false" flatten="false" preservelastmodified="true" includeEmptyDirs="true" verbose="false">
			<fileset refid="copied-files" />
		</copy>
	</target>

	<target name="copy-svn-files">
		<copy todir="${toDir}" overwrite="true" flatten="false" preservelastmodified="true" includeEmptyDirs="true" verbose="false">
			<dirset dir="${fromDir}" casesensitive="false" erroronmissingdir="true" defaultexcludes="false">
				<include name="**/.svn" />
				<exclude name="**/*.class" />
			</dirset>
		</copy>
		<antcall target="copy-files">
			<!--<param name="svn" value="true" />-->
		</antcall>
	</target>

	<target name="move-files">
		<move todir="${toDir}" overwrite="true" flatten="false">
			<fileset refid="moved-files" />
		</move>
	</target>

	<target name="delete-files">
		<delete failonerror="false">
			<fileset refid="deleted-files" />
		</delete>
	</target>

	<!--
	<target name="test">
		<antcall target="test2">
			<param name="svn" value="true" />
		</antcall>
	</target>
	-->

	<target name="test2">
	
		<copy todir="${toDir}" overwrite="false" flatten="false" preservelastmodified="true" includeEmptyDirs="true" verbose="false">
			<fileset dir="D:\Projects\NXTM\Source-Code\osmoz-base\src\main\resources\META-INF" casesensitive="false" erroronmissingdir="true" defaultexcludes="true">
				<include name="plugins\*.xml" />
				<include name="spring\*.xml" />
				<exclude name="**/target/**" />
			</fileset>
		</copy>
	
		<copy todir="${toDir}" overwrite="false" flatten="false" preservelastmodified="true" includeEmptyDirs="true" verbose="false">
			<fileset dir="D:\Projects\NXTM\Source-Code\osmoz-core\src\main\resources\META-INF" casesensitive="false" erroronmissingdir="true" defaultexcludes="true">
				<include name="plugins\*.xml" />
				<include name="spring\*.xml" />
				<exclude name="**/target/**" />
			</fileset>
		</copy>
	
		<copy todir="${toDir}" overwrite="false" flatten="false" preservelastmodified="true" includeEmptyDirs="true" verbose="false">
			<fileset dir="D:\Projects\NXTM\Source-Code\osmoz-users\src\main\resources\META-INF" casesensitive="false" erroronmissingdir="true" defaultexcludes="true">
				<include name="plugins\*.xml" />
				<include name="spring\*.xml" />
				<exclude name="**/target/**" />
			</fileset>
		</copy>
	
		<copy todir="${toDir}" overwrite="false" flatten="false" preservelastmodified="true" includeEmptyDirs="true" verbose="false">
			<fileset dir="D:\Projects\NXTM\Source-Code\osmoz-sites\src\main\resources\META-INF" casesensitive="false" erroronmissingdir="true" defaultexcludes="true">
				<include name="plugins\*.xml" />
				<include name="spring\*.xml" />
				<exclude name="**/target/**" />
			</fileset>
	</copy>
	<!-- 
		<echo message="${svn}" />
		<echo message="${toDir}" />
		 -->
	</target>
</project>